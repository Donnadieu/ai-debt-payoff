---
name: Debt Management Core - Input forms and CRUD operations
status: backlog
created: 2025-09-05T05:50:36Z
depends_on: [002, 003]
parallel: false
conflicts_with: []
---

# Task: Debt Management Core - Input forms and CRUD operations

## Description

Implement the core debt management functionality with user-friendly input forms, comprehensive validation, and full CRUD operations. This includes debt creation, editing, deletion, and list management with integration to the SQLite data layer for offline persistence.

## Acceptance Criteria

- [ ] Debt input form with validation for balance, APR, and minimum payment
- [ ] Add new debt functionality with form validation and error handling
- [ ] Edit existing debt with pre-populated form data
- [ ] Delete debt with confirmation dialog and cascade handling
- [ ] Debt list view with summary information and actions
- [ ] Form validation with real-time feedback and error messages
- [ ] Integration with SQLite data layer for persistence
- [ ] Keyboard-friendly numeric inputs with proper formatting
- [ ] Accessibility compliance for form controls and navigation
- [ ] Loading states and error handling for all operations

## Technical Details

### Form Validation Rules
```typescript
const DebtValidationSchema = z.object({
  name: z.string().min(1, "Debt name is required").max(50, "Name too long"),
  balance: z.number().min(0, "Balance must be positive").max(1000000, "Balance too large"),
  apr: z.number().min(0, "APR must be positive").max(100, "APR cannot exceed 100%"),
  minimum_payment: z.number().min(1, "Minimum payment must be at least $1")
});
```

### UI Components
- **AddDebtForm**: Modal form for creating new debts
- **EditDebtForm**: Modal form for editing existing debts  
- **DebtListItem**: Individual debt display with actions
- **DebtList**: Scrollable list of all debts with summary
- **DeleteConfirmation**: Modal for debt deletion confirmation
- **ValidationMessage**: Reusable form validation feedback

### Technology Stack
- **Forms**: React Hook Form with Zod validation
- **UI**: GluestackUI components with consistent theming
- **State**: React Query for server state, Zustand for local state
- **Navigation**: React Navigation for form modals
- **Persistence**: Integration with SQLite data layer from Task 003

### Files to Create/Modify
- `src/screens/DebtsScreen.tsx` - Main debt management screen
- `src/components/forms/AddDebtForm.tsx` - New debt creation form
- `src/components/forms/EditDebtForm.tsx` - Debt editing form
- `src/components/debt/DebtListItem.tsx` - Individual debt display
- `src/components/debt/DebtList.tsx` - Debt list container
- `src/components/modals/DeleteDebtModal.tsx` - Deletion confirmation
- `src/hooks/useDebts.ts` - Custom hooks for debt operations
- `src/utils/formatters.ts` - Currency and percentage formatters
- `src/utils/validation.ts` - Form validation schemas

## Dependencies

- [x] Task 002: Navigation and UI Foundation (screens, components, theming)
- [x] Task 003: Data Layer Setup (SQLite schema, repositories)
- [ ] React Hook Form and Zod packages
- [ ] GluestackUI form components

## Effort Estimate

- **Size**: M
- **Hours**: 24 hours
- **Parallel**: false (requires both UI foundation and data layer)

## Definition of Done

- [ ] Users can successfully add new debts with all required fields
- [ ] Edit functionality works with pre-populated data and validation
- [ ] Delete functionality includes confirmation and removes from database
- [ ] Form validation provides clear, helpful error messages
- [ ] All numeric inputs format currencies and percentages correctly
- [ ] Loading states display during database operations
- [ ] Error handling covers network and database failures
- [ ] Accessibility features work with screen readers
- [ ] Unit tests cover all CRUD operations and validation logic
- [ ] Integration tests verify database persistence
- [ ] UI matches design specifications and dark theme support
- [ ] Performance testing shows smooth list scrolling for 100+ debts